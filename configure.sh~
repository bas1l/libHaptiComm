#!/bin/bash

dtmp="tmp"
sphinxbase="sphinxbase-5prealpha"
sphinxpocket="pocketsphinx-5prealpha"

#apt-get update
#apt-get upgrade

# Boost libraries
apt-get install -y libboost-all-dev

# CMU Sphinx (pocket+base)
apt-get install -y gcc automake autoconf libtool bison swig pulseaudio python3.5-dev
[ ! -d "$dtmp" ] && mkdir "$dtmp"

cd "$dtmp"
[ ! -f "$sphinxbase.tar.gz" ] && wget "https://sourceforge.net/projects/cmusphinx/files/sphinxbase/5prealpha/$sphinxbase.tar.gz" && tar -zxvf "$sphinxbase.tar.gz"
[ ! -f "$sphinxpocket.tar.gz" ] && wget "https://sourceforge.net/projects/cmusphinx/files/pocketsphinx/5prealpha/$sphinxpocket.tar.gz" && tar -zxvf "$sphinxpocket.tar.gz"

cd "$sphinxbase"
./autogen.sh
./configure
make
sudo make install
export LD_LIBRARY_PATH="/usr/local/lib"
export PKG_CONFIG_PATH="/usr/local/lib/pkgconfig"

cd "../$sphinxpocket"
./autogen.sh
./configure
make
sudo make install

